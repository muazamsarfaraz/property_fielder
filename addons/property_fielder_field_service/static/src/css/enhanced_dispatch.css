/* Enhanced Dispatch View - Modern Odoo-Style Theme */
/* Design System: Property Fielder Dispatch */

/* ========================================
   FIX: ODOO FORM VIEW LAYOUT (Chatter vs Sheet)
   This fixes an issue where the form sheet was being
   squashed to 34px while the chatter took full width.
   Using high specificity and !important to override Odoo core styles.
   ======================================== */
.o_action_manager .o_form_view .o_form_renderer {
    display: flex !important;
    flex-direction: row !important;
}

.o_action_manager .o_form_view .o_form_renderer > .o_form_sheet_bg {
    flex: 1 1 auto !important;
    min-width: 600px !important;
    overflow: auto !important;
}

.o_action_manager .o_form_view .o_form_renderer > .oe_chatter {
    flex: 0 0 350px !important;
    max-width: 400px !important;
    min-width: 300px !important;
    border-left: 1px solid var(--pf-gray-300, #dee2e6);
}

/* Responsive: Stack chatter below sheet on narrow screens */
@media (max-width: 992px) {
    .o_action_manager .o_form_view .o_form_renderer {
        flex-direction: column !important;
    }

    .o_action_manager .o_form_view .o_form_renderer > .o_form_sheet_bg {
        min-width: 100% !important;
        width: 100% !important;
    }

    .o_action_manager .o_form_view .o_form_renderer > .oe_chatter {
        flex: 0 0 auto !important;
        max-width: none !important;
        min-width: auto !important;
        width: 100% !important;
        border-left: none;
        border-top: 1px solid var(--pf-gray-300, #dee2e6);
    }
}

/* ========================================
   CSS CUSTOM PROPERTIES (Design Tokens)
   ======================================== */
:root {
    /* Primary (Odoo Purple) */
    --pf-primary: #714B67;
    --pf-primary-light: #8A6A80;
    --pf-primary-dark: #5A3C53;
    --pf-primary-bg: rgba(113, 75, 103, 0.08);

    /* Semantic */
    --pf-success: #2ECC71;
    --pf-warning: #F39C12;
    --pf-danger: #E74C3C;
    --pf-info: #3498DB;

    /* Neutrals */
    --pf-gray-900: #1a252f;
    --pf-gray-700: #2c3e50;
    --pf-gray-500: #6c757d;
    --pf-gray-300: #dee2e6;
    --pf-gray-100: #f8f9fa;
    --pf-white: #ffffff;

    /* Spacing */
    --pf-space-xs: 0.25rem;
    --pf-space-sm: 0.5rem;
    --pf-space-md: 1rem;
    --pf-space-lg: 1.5rem;

    /* Radius */
    --pf-radius-sm: 4px;
    --pf-radius-md: 8px;
    --pf-radius-lg: 12px;
    --pf-radius-pill: 20px;

    /* Shadows */
    --pf-shadow-sm: 0 1px 3px rgba(0,0,0,0.05);
    --pf-shadow-md: 0 4px 12px rgba(0,0,0,0.08), 0 1px 3px rgba(0,0,0,0.05);
    --pf-shadow-lg: 0 8px 24px rgba(0,0,0,0.12), 0 2px 6px rgba(0,0,0,0.08);

    /* Transitions */
    --pf-transition: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.o_enhanced_dispatch_view {
    display: flex;
    flex-direction: column;
    height: 100vh;
    background: var(--pf-gray-100);
    overflow: hidden;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

/* ========================================
   GLASSMORPHISM NAVIGATION BAR
   ======================================== */
.dispatch-navbar {
    display: flex;
    align-items: center;
    padding: 0.5rem 1rem;
    background: rgba(26, 37, 47, 0.88);
    -webkit-backdrop-filter: blur(12px);
    backdrop-filter: blur(12px);
    color: white;
    border-bottom: 1px solid rgba(255,255,255,0.08);
    box-shadow: 0 4px 20px rgba(0,0,0,0.15);
    z-index: 1000;
    gap: 1rem;
}

.dispatch-brand {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 1.1rem;
    font-weight: 600;
    letter-spacing: -0.01em;
    color: #fff;
    white-space: nowrap;
}

.dispatch-brand i {
    font-size: 1.25rem;
    color: var(--pf-primary-light);
}

/* Date Navigation - Prominent, Centered */
.dispatch-date-nav {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    background: rgba(255,255,255,0.1);
    padding: 0.25rem;
    border-radius: 6px;
}

.btn-date-nav {
    background: transparent;
    border: none;
    color: rgba(255,255,255,0.8);
    padding: 0.4rem 0.6rem;
    border-radius: 4px;
    transition: all 0.15s ease;
}

.btn-date-nav:hover {
    background: rgba(255,255,255,0.15);
    color: white;
}

.date-display {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.date-input {
    background: rgba(255,255,255,0.9) !important;
    border: none !important;
    border-radius: 4px !important;
    padding: 0.35rem 0.5rem !important;
    font-weight: 500;
    width: 140px;
}

.btn-today {
    background: transparent;
    border: 1px solid rgba(255,255,255,0.4);
    color: rgba(255,255,255,0.9);
    padding: 0.35rem 0.75rem;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.btn-today:hover {
    background: rgba(255,255,255,0.15);
    color: white;
    border-color: rgba(255,255,255,0.6);
}

/* ========================================
   PROGRESS STEPPER - Non-clickable indicators
   ======================================== */
.dispatch-stepper {
    display: flex;
    align-items: center;
    gap: 0;
    margin-left: auto;
}

.stepper-step {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.4rem 0.75rem;
    color: rgba(255,255,255,0.5);
    font-size: 0.8rem;
    font-weight: 500;
    transition: all 0.2s ease;
}

.stepper-number {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: rgba(255,255,255,0.2);
    color: rgba(255,255,255,0.6);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    font-weight: 700;
    transition: all 0.2s ease;
}

.stepper-label {
    display: none;
}

@media (min-width: 1200px) {
    .stepper-label {
        display: inline;
    }
}

.stepper-connector {
    width: 24px;
    height: 2px;
    background: rgba(255,255,255,0.2);
    transition: background 0.2s ease;
}

.stepper-connector.completed {
    background: var(--pf-success);
}

/* Active step */
.stepper-step.active {
    color: white;
}

.stepper-step.active .stepper-number {
    background: var(--pf-primary);
    color: white;
    box-shadow: 0 2px 8px rgba(113, 75, 103, 0.4);
}

/* Completed step */
.stepper-step.completed .stepper-number {
    background: var(--pf-success);
    color: white;
}

.stepper-step.completed .stepper-number::after {
    content: '‚úì';
    font-size: 0.7rem;
}

.stepper-step.completed .stepper-number span {
    display: none;
}

/* Locked step */
.stepper-step.locked {
    opacity: 0.4;
}

.stepper-step.locked .stepper-number {
    background: rgba(255,255,255,0.1);
}

/* Controls */
.dispatch-controls {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-left: 1rem;
}

/* Refresh Button */
.btn-icon-refresh {
    background: rgba(255,255,255,0.1);
    border: 1px solid rgba(255,255,255,0.2);
    color: rgba(255,255,255,0.8);
    padding: 0.4rem 0.6rem;
    border-radius: 4px;
}

.btn-icon-refresh:hover {
    background: rgba(255,255,255,0.2);
    color: white;
}

/* Ghost Button for Test Data (Subtle) */
.btn-ghost {
    background: transparent;
    border: 1px solid rgba(255,255,255,0.25);
    color: rgba(255,255,255,0.6);
    padding: 0.4rem 0.6rem;
    border-radius: 4px;
    font-size: 0.8rem;
}

.btn-ghost:hover {
    background: rgba(255,255,255,0.1);
    color: rgba(255,255,255,0.9);
    border-color: rgba(255,255,255,0.4);
}

.dropdown-header {
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: #6c757d;
    padding: 0.5rem 1rem;
}

/* ========================================
   MAIN CONTENT - CSS Grid Layout
   ======================================== */
.dispatch-content {
    flex: 1;
    display: grid;
    grid-template-columns: 400px 1fr; /* Widened from 350px for better readability */
    grid-template-rows: 1fr auto;
    overflow: hidden;
    position: relative;
    transition: grid-template-columns 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Sidebar collapsed state - slide animation */
.dispatch-content.sidebar-collapsed {
    grid-template-columns: 0px 1fr;
}

/* ========================================
   DOCKED SIDEBAR - Slide Animation
   ======================================== */
.dispatch-sidebar {
    grid-column: 1;
    grid-row: 1 / -1;
    background: var(--pf-white);
    border-right: 1px solid var(--pf-gray-300);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    z-index: 100;
    width: 400px;
    min-width: 400px;
    transform: translateX(0);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                opacity 0.3s ease,
                width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Sidebar slide-out animation when collapsed */
.dispatch-content.sidebar-collapsed .dispatch-sidebar {
    transform: translateX(-100%);
    opacity: 0;
    width: 0;
    min-width: 0;
    border-right: none;
}

/* Sidebar expand button (shown when collapsed) */
.sidebar-expand-button {
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    z-index: 150;
    background: var(--pf-primary);
    color: white;
    border: none;
    border-radius: 0 var(--pf-radius-md) var(--pf-radius-md) 0;
    padding: 1rem 0.5rem;
    cursor: pointer;
    box-shadow: 2px 0 8px rgba(0,0,0,0.15);
    transition: all var(--pf-transition);
    opacity: 0;
    pointer-events: none;
}

.dispatch-content.sidebar-collapsed .sidebar-expand-button {
    opacity: 1;
    pointer-events: auto;
}

.sidebar-expand-button:hover {
    background: var(--pf-primary-dark);
    padding-right: 0.75rem;
}

.sidebar-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.5rem 1rem;
    background: linear-gradient(135deg, var(--pf-primary) 0%, var(--pf-primary-dark) 100%);
    color: white;
    flex-shrink: 0;
}

.sidebar-title {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    font-weight: 600;
    font-size: 0.85rem;
}

.sidebar-title i {
    font-size: 0.95rem;
    opacity: 0.9;
}

.btn-sidebar-collapse {
    background: rgba(255,255,255,0.15);
    border: none;
    color: white;
    padding: 0.35rem 0.5rem;
    border-radius: var(--pf-radius-sm);
    cursor: pointer;
    transition: all var(--pf-transition);
}

.btn-sidebar-collapse:hover {
    background: rgba(255,255,255,0.25);
}

.sidebar-content {
    flex: 1;
    overflow-y: auto;
    padding: 0.75rem;
    padding-bottom: 0; /* Footer will provide bottom padding */
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

/* Sidebar Tab Bar (Jobs | Inspectors) */
.sidebar-tab-bar {
    display: flex;
    gap: 0;
    background: var(--pf-gray-200);
    border-radius: var(--pf-radius);
    padding: 3px;
    margin-bottom: 0.5rem;
}

.sidebar-tab {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.35rem;
    padding: 0.4rem 0.5rem;
    border: none;
    background: transparent;
    color: var(--pf-gray-600);
    font-size: 0.75rem;
    font-weight: 600;
    border-radius: calc(var(--pf-radius) - 2px);
    cursor: pointer;
    transition: all 0.15s ease;
}

.sidebar-tab:hover {
    color: var(--pf-gray-800);
    background: rgba(255,255,255,0.5);
}

.sidebar-tab.active {
    background: white;
    color: var(--pf-primary);
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.sidebar-tab i {
    font-size: 0.7rem;
}

.tab-badge {
    background: var(--pf-primary);
    color: white;
    font-size: 0.6rem;
    padding: 0.1rem 0.35rem;
    border-radius: 10px;
    min-width: 16px;
    text-align: center;
}

.sidebar-tab.active .tab-badge {
    background: var(--pf-primary);
}

/* Sidebar Tab Content */
.sidebar-tab-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    min-height: 0; /* Allow flex shrinking */
}

.tab-actions {
    display: flex;
    align-items: center;
    gap: 0.35rem;
    padding: 0.25rem 0;
    flex-wrap: wrap;
}

/* ========================================
   QUICK FILTER PILLS (Issue 4)
   ======================================== */
.quick-filter-pills {
    display: flex;
    gap: 0.35rem;
    padding: 0.4rem 0;
    flex-wrap: wrap;
    border-bottom: 1px solid var(--pf-gray-200);
    margin-bottom: 0.5rem;
}

.filter-pill {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.25rem 0.6rem;
    border-radius: 20px;
    font-size: 0.7rem;
    font-weight: 500;
    border: 1px solid var(--pf-gray-300);
    background: white;
    color: var(--pf-gray-600);
    cursor: pointer;
    transition: all 0.15s ease;
    white-space: nowrap;
}

.filter-pill:hover {
    border-color: var(--pf-primary-light);
    background: var(--pf-primary-bg);
    color: var(--pf-primary);
}

.filter-pill.active {
    background: var(--pf-primary);
    border-color: var(--pf-primary);
    color: white;
}

.filter-pill .pill-count {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 16px;
    height: 16px;
    padding: 0 4px;
    border-radius: 8px;
    font-size: 0.6rem;
    font-weight: 600;
    background: rgba(0,0,0,0.1);
}

.filter-pill.active .pill-count {
    background: rgba(255,255,255,0.3);
}

/* Unassigned filter - red accent */
.filter-pill.filter-unassigned:not(.active) {
    border-color: #FCA5A5;
    color: #DC2626;
}
.filter-pill.filter-unassigned.active {
    background: #DC2626;
    border-color: #DC2626;
}

/* Scheduled filter - blue accent */
.filter-pill.filter-scheduled:not(.active) {
    border-color: #93C5FD;
    color: #2563EB;
}
.filter-pill.filter-scheduled.active {
    background: #2563EB;
    border-color: #2563EB;
}

/* Urgent filter - pulsing */
.filter-pill.filter-urgent {
    border-color: #F87171;
    color: #DC2626;
    animation: pulse-subtle 2s infinite;
}

.filter-pill.filter-urgent.active {
    background: #DC2626;
    border-color: #DC2626;
    animation: none;
}

.filter-pill .urgent-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: #EF4444;
    animation: pulse-urgent 1.5s infinite;
}

.filter-pill.active .urgent-dot {
    background: white;
}

@keyframes pulse-subtle {
    0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); }
    50% { box-shadow: 0 0 0 4px rgba(239, 68, 68, 0); }
}

/* Search and View Controls Row */
.search-view-row {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.5rem;
}

.search-view-row .search-filter {
    flex: 1;
    margin-bottom: 0;
}

.view-controls {
    display: flex;
    align-items: center;
    gap: 0.35rem;
    flex-shrink: 0;
}

.view-controls .btn-xs {
    padding: 0.2rem 0.4rem;
    font-size: 0.7rem;
}

.job-count-label,
.inspector-count-label {
    margin-left: auto;
    font-size: 0.7rem;
    color: var(--pf-gray-500);
}

/* ========================================
   QUICK ACTION BAR (Sticky when jobs selected)
   ======================================== */
.quick-action-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: linear-gradient(135deg, var(--pf-primary-bg), rgba(139, 92, 246, 0.15));
    border: 1px solid var(--pf-primary-light);
    border-radius: var(--pf-radius-md);
    padding: 0.5rem 0.75rem;
    margin-bottom: 0.5rem;
    animation: slideDown 0.2s ease-out;
    position: sticky;
    top: 0;
    z-index: 10;
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.quick-action-bar .selection-info {
    display: flex;
    align-items: center;
    gap: 0.35rem;
}

.quick-action-bar .selection-count {
    font-weight: 700;
    font-size: 1rem;
    color: var(--pf-primary);
    background: white;
    padding: 0.15rem 0.5rem;
    border-radius: var(--pf-radius-sm);
    min-width: 28px;
    text-align: center;
}

.quick-action-bar .selection-label {
    font-size: 0.75rem;
    color: var(--pf-gray-600);
}

.quick-action-bar .quick-actions {
    display: flex;
    gap: 0.35rem;
}

.quick-action-bar .quick-assign-btn {
    font-weight: 600;
    padding: 0.35rem 0.75rem;
    font-size: 0.75rem;
}

.quick-action-bar .btn-outline-secondary {
    padding: 0.35rem 0.5rem;
    font-size: 0.7rem;
}

/* Sidebar Sections (compact) */
.sidebar-section {
    background: var(--pf-gray-100);
    border-radius: var(--pf-radius-sm);
    padding: 0.5rem;
    border: 1px solid var(--pf-gray-300);
}

.sidebar-section.collapsible .section-header.clickable {
    cursor: pointer;
    margin: -0.5rem;
    padding: 0.5rem;
    border-radius: var(--pf-radius-sm);
    transition: background var(--pf-transition);
}

.sidebar-section.collapsible .section-header.clickable:hover {
    background: rgba(0,0,0,0.03);
}

.section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 0.35rem;
}

.section-header h6 {
    margin: 0;
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--pf-gray-700);
    display: flex;
    align-items: center;
    gap: 0.35rem;
    text-transform: uppercase;
    letter-spacing: 0.3px;
}

.section-header h6 i {
    color: var(--pf-primary);
    font-size: 0.75rem;
}

.section-actions {
    display: flex;
    gap: 0.35rem;
}

/* Section header right side (actions + collapse icon) */
.section-header-right {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.collapse-icon {
    color: var(--pf-gray-500);
    font-size: 0.7rem;
    transition: transform 0.2s ease;
}

.section-header.clickable:hover .collapse-icon {
    color: var(--pf-primary);
}

/* Inspector context hint (Issue 5) */
.inspector-context-hint {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 0.75rem;
    background: linear-gradient(135deg, #EDE9FE, #DBEAFE);
    border-radius: var(--pf-radius-sm);
    font-size: 0.75rem;
    color: #5B21B6;
    margin-bottom: 0.5rem;
    border-left: 3px solid #7C3AED;
}

.inspector-context-hint i {
    font-size: 0.9rem;
}

.inspector-context-hint strong {
    font-weight: 700;
}

/* Inspector item with availability */
.inspector-item {
    display: flex;
    align-items: flex-start;
    gap: 0.4rem;
    padding: 0.4rem 0.5rem;
    border-left: 3px solid transparent;
}

.inspector-item.selected {
    border-left-color: var(--pf-primary);
}

.inspector-item.unavailable {
    border-left-color: var(--pf-gray-300);
}

.inspector-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0.15rem;
    min-width: 0;
}

.inspector-name-row {
    display: flex;
    align-items: center;
    gap: 0.35rem;
}

.inspector-name-row .resource-name {
    font-weight: 600;
    font-size: 0.8rem;
}

.inspector-details {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.65rem;
    color: var(--pf-gray-500);
}

.inspector-shift {
    display: flex;
    align-items: center;
    gap: 0.2rem;
}

.inspector-shift i {
    font-size: 0.6rem;
}

.inspector-status-pill {
    padding: 0.1rem 0.4rem;
    border-radius: 10px;
    font-size: 0.55rem;
    font-weight: 600;
    text-transform: uppercase;
}

.inspector-status-pill.available {
    background: #DCFCE7;
    color: #16A34A;
}

.inspector-status-pill.unavailable {
    background: #F3F4F6;
    color: #6B7280;
}

.inspector-availability {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    flex-shrink: 0;
}

.availability-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
}

.availability-dot.available {
    background: var(--pf-success);
    box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.2);
}

.availability-dot.unavailable {
    background: var(--pf-gray-400);
}

.availability-text {
    color: var(--pf-gray-500);
}

/* Visual grouping - different background for inspectors section */
.inspectors-section {
    background: rgba(113, 75, 103, 0.03);
    border-color: rgba(113, 75, 103, 0.15);
}

/* Quick Filter Dropdown */
.quick-filter-dropdown {
    position: relative;
}

.quick-filter-dropdown .dropdown-toggle {
    font-size: 0.75rem;
    padding: 0.25rem 0.5rem;
    border-radius: var(--pf-radius-sm);
    display: flex;
    align-items: center;
    gap: 0.25rem;
}

.quick-filter-dropdown .dropdown-toggle::after {
    margin-left: 0.25rem;
}

.quick-filter-dropdown .dropdown-menu {
    position: absolute;
    top: 100%;
    right: 0;
    min-width: 160px;
    padding: 0.5rem 0;
    margin-top: 0.25rem;
    background: white;
    border: 1px solid var(--pf-gray-200);
    border-radius: var(--pf-radius);
    box-shadow: var(--pf-shadow-lg);
    z-index: 1000;
}

.quick-filter-dropdown .dropdown-item {
    font-size: 0.8rem;
    padding: 0.5rem 1rem;
    display: flex;
    align-items: center;
    color: var(--pf-text);
    transition: background 0.15s ease;
}

.quick-filter-dropdown .dropdown-item:hover {
    background: var(--pf-primary-bg);
    color: var(--pf-primary);
}

.quick-filter-dropdown .dropdown-item i {
    width: 16px;
    text-align: center;
    color: var(--pf-gray-500);
}

.quick-filter-dropdown .dropdown-item:hover i {
    color: var(--pf-primary);
}

.quick-filter-dropdown .dropdown-divider {
    margin: 0.25rem 0;
    border-top: 1px solid var(--pf-gray-200);
}

.quick-filter-dropdown .dropdown-item.text-danger:hover {
    background: #fee2e2;
    color: #dc2626;
}

.quick-filter-dropdown .dropdown-item.text-danger:hover i {
    color: #dc2626;
}

/* Search Filter */
.search-filter {
    margin-bottom: 0.75rem;
}

.search-filter .input-group {
    background: var(--pf-gray-100);
    border-radius: var(--pf-radius-sm);
}

.search-filter .input-group-text {
    background: transparent;
    border: none;
    color: var(--pf-gray-500);
    padding: 0.35rem 0.5rem 0.35rem 0.75rem;
}

.search-filter .form-control {
    background: transparent;
    border: none;
    padding: 0.35rem 0.5rem;
    font-size: 0.85rem;
}

.search-filter .form-control:focus {
    box-shadow: none;
    background: transparent;
}

.search-filter .form-control::placeholder {
    color: var(--pf-gray-400);
}

.search-filter .btn-outline-secondary {
    border: none;
    background: transparent;
    color: var(--pf-gray-500);
    padding: 0.35rem 0.5rem;
}

.search-filter .btn-outline-secondary:hover {
    color: var(--pf-gray-700);
    background: transparent;
}

.section-body {
    margin-top: 1rem;
}

.setting-group {
    margin-bottom: 1rem;
}

.setting-group:last-child {
    margin-bottom: 0;
}

.setting-group .form-label {
    font-size: 0.8rem;
    font-weight: 500;
    color: var(--pf-gray-500);
    margin-bottom: 0.35rem;
}

/* Sidebar Footer (STICKY action button - always visible) */
.sidebar-footer {
    position: sticky;
    bottom: 0;
    left: 0;
    right: 0;
    margin-top: auto;
    padding: 1rem;
    background: white;
    border-top: 1px solid var(--pf-gray-300);
    box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.08);
    z-index: 100;
}

.sidebar-footer .btn-primary {
    background: var(--pf-primary);
    border-color: var(--pf-primary);
    font-weight: 600;
    padding: 0.875rem 1rem;
    transition: all var(--pf-transition);
}

.sidebar-footer .btn-primary:hover:not(:disabled) {
    background: var(--pf-primary-dark);
    border-color: var(--pf-primary-dark);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(113, 75, 103, 0.3);
}

.sidebar-footer .btn-primary:disabled,
.sidebar-footer .btn-primary.disabled-with-reason {
    opacity: 0.6;
    cursor: not-allowed;
}

.selection-summary {
    display: flex;
    justify-content: center;
    gap: 0.5rem;
    margin-top: 0.5rem;
    font-size: 0.8rem;
    color: var(--pf-gray-500);
}

.selection-summary .separator {
    color: var(--pf-gray-300);
}

.prereq-hint {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    margin-top: 0.5rem;
    font-size: 0.8rem;
    color: var(--pf-warning);
    text-align: center;
}

.prereq-hint i {
    font-size: 0.9rem;
}

.prereq-warning {
    background: #fff3cd;
    border: 1px solid #ffeaa7;
    border-radius: var(--pf-radius-md);
    padding: 1rem;
    text-align: center;
    color: #856404;
    font-size: 0.85rem;
}

.prereq-warning i {
    font-size: 1.25rem;
    margin-bottom: 0.5rem;
    display: block;
}

/* Selection Cards (Optimize tab) */
.selection-cards {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0.75rem;
    margin-bottom: 1rem;
}

/* Success button state (green when routes are ready) */
.sidebar-footer .btn-success {
    background: var(--pf-success);
    border-color: var(--pf-success);
    font-weight: 600;
    padding: 0.875rem 1rem;
    transition: all var(--pf-transition);
}

.sidebar-footer .btn-success:hover:not(:disabled) {
    background: #1a9f4a;
    border-color: #1a9f4a;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
}

.selection-card {
    background: var(--pf-white);
    border: 1px solid var(--pf-gray-300);
    border-radius: var(--pf-radius-md);
    padding: 1rem;
    text-align: center;
    transition: all var(--pf-transition);
}

.selection-card:hover {
    border-color: var(--pf-primary-light);
    box-shadow: var(--pf-shadow-sm);
}

.selection-card i {
    font-size: 1.25rem;
    color: var(--pf-primary);
    margin-bottom: 0.35rem;
    display: block;
}

.selection-card .count {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--pf-gray-700);
    display: block;
}

.selection-card .label {
    font-size: 0.75rem;
    color: var(--pf-gray-500);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

/* Time Stats (Optimization progress) */
.time-stats {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.time-stat small {
    display: block;
    font-size: 0.7rem;
    color: var(--pf-gray-500);
    margin-bottom: 0.15rem;
}

.time-stat strong {
    font-size: 0.9rem;
    color: var(--pf-gray-700);
}

.progress-badge {
    background: var(--pf-primary);
    color: white;
    padding: 0.35rem 0.75rem;
    border-radius: var(--pf-radius-pill);
    font-weight: 600;
    font-size: 0.85rem;
}

/* Empty List Notice */
.empty-list-notice {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 2rem 1rem;
    color: var(--pf-gray-500);
    text-align: center;
}

.empty-list-notice i {
    font-size: 2rem;
    margin-bottom: 0.5rem;
    opacity: 0.5;
}

.empty-list-notice span {
    font-size: 0.85rem;
}

/* ========================================
   MAP AREA
   ======================================== */
.dispatch-map-area {
    grid-column: 2;
    grid-row: 1;
    position: relative;
    overflow: hidden;
}

/* Map Container (Full Area) */
.dispatch-map-container {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 1;
}

/* Loading Overlay */
.dispatch-loading-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255,255,255,0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 500;
}

/* Corner Empty State (non-blocking) */
.empty-state-corner {
    position: absolute;
    bottom: 20px;
    left: 20px;
    display: flex;
    align-items: center;
    gap: 1rem;
    background: var(--pf-white);
    padding: 1rem 1.25rem;
    border-radius: var(--pf-radius-lg);
    box-shadow: var(--pf-shadow-lg);
    border: 1px solid rgba(0,0,0,0.06);
    z-index: 200;
    animation: slideInUp 0.3s ease-out;
}

@keyframes slideInUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

.empty-state-corner i {
    font-size: 1.5rem;
    color: var(--pf-primary);
}

.empty-state-corner .empty-text {
    display: flex;
    flex-direction: column;
}

.empty-state-corner .empty-text strong {
    font-size: 0.9rem;
    color: var(--pf-gray-700);
}

.empty-state-corner .empty-text span {
    font-size: 0.8rem;
    color: var(--pf-gray-500);
}

.empty-state-corner .btn-sm {
    white-space: nowrap;
}

/* Enhanced Corner Empty State */
.empty-state-corner.enhanced {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.75rem;
    max-width: 300px;
    background: linear-gradient(135deg, var(--pf-primary) 0%, var(--pf-primary-dark) 100%);
    color: white;
}

.empty-state-corner.enhanced .empty-corner-illustration {
    width: 48px;
    height: 48px;
    background: rgba(255,255,255,0.15);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.empty-state-corner.enhanced .empty-corner-illustration i {
    font-size: 1.25rem;
    color: white;
}

.empty-state-corner.enhanced .empty-text strong {
    color: white;
    font-size: 1rem;
    margin-bottom: 0.25rem;
}

.empty-state-corner.enhanced .empty-text span {
    color: rgba(255,255,255,0.85);
    font-size: 0.85rem;
    line-height: 1.4;
}

.empty-corner-actions {
    display: flex;
    gap: 0.5rem;
    margin-top: 0.25rem;
}

.empty-corner-actions .btn-outline-light {
    border-color: rgba(255,255,255,0.4);
    color: white;
}

.empty-corner-actions .btn-outline-light:hover {
    background: rgba(255,255,255,0.15);
    border-color: rgba(255,255,255,0.6);
}

/* ========================================
   EMPTY STATE CARDS (Sidebar)
   ======================================== */
.empty-state-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding: 2rem 1.5rem;
    background: linear-gradient(180deg, var(--pf-gray-50) 0%, white 100%);
    border-radius: var(--pf-radius-lg);
    margin: 0.5rem;
    border: 1px dashed var(--pf-gray-200);
}

.empty-state-card.compact {
    padding: 1.5rem 1rem;
}

.empty-state-card h5 {
    margin: 0 0 0.5rem 0;
    font-size: 1rem;
    font-weight: 600;
    color: var(--pf-gray-700);
}

.empty-state-card h6 {
    margin: 0 0 0.5rem 0;
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--pf-gray-700);
}

.empty-state-card p {
    margin: 0 0 1rem 0;
    font-size: 0.85rem;
    color: var(--pf-gray-500);
    line-height: 1.5;
}

/* Empty State Illustration (stacked icons) */
.empty-state-illustration {
    position: relative;
    width: 80px;
    height: 80px;
    margin-bottom: 1rem;
}

.empty-state-illustration.small {
    width: 60px;
    height: 60px;
    margin-bottom: 0.75rem;
}

.empty-state-illustration i.primary {
    position: absolute;
    font-size: 2.5rem;
    color: var(--pf-primary);
    opacity: 0.8;
    top: 50%;
    left: 50%;
    transform: translate(-60%, -50%);
}

.empty-state-illustration.small i.primary {
    font-size: 1.75rem;
}

.empty-state-illustration i.accent {
    position: absolute;
    font-size: 1.5rem;
    color: var(--pf-primary-dark);
    bottom: 0;
    right: 0;
    background: white;
    padding: 0.25rem;
    border-radius: 50%;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.empty-state-illustration.small i.accent {
    font-size: 1rem;
    padding: 0.2rem;
}

/* Empty State Actions */
.empty-state-actions {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 1rem;
}

/* Empty State Hint */
.empty-state-hint {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 0.75rem;
    background: rgba(255, 193, 7, 0.1);
    border-radius: var(--pf-radius-sm);
    font-size: 0.75rem;
    color: var(--pf-gray-600);
}

.empty-state-hint i {
    color: #f59e0b;
    font-size: 0.9rem;
}

/* Empty State Steps (for routes) */
.empty-state-steps {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid var(--pf-gray-100);
    width: 100%;
}

.empty-state-steps .step {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-size: 0.8rem;
    color: var(--pf-gray-600);
    text-align: left;
}

.empty-state-steps .step-num {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 20px;
    height: 20px;
    background: var(--pf-primary-light);
    color: var(--pf-primary);
    border-radius: 50%;
    font-size: 0.7rem;
    font-weight: 600;
    flex-shrink: 0;
}

/* ========================================
   FLOATING PANELS - Modern Card Style
   ======================================== */
.floating-panel {
    position: absolute;
    z-index: 1000;
    background: var(--pf-white);
    border-radius: var(--pf-radius-lg);
    box-shadow: var(--pf-shadow-lg);
    border: 1px solid rgba(0,0,0,0.06);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    transition: all var(--pf-transition);
    animation: scaleIn 0.2s ease-out;
}

@keyframes scaleIn {
    from { opacity: 0; transform: scale(0.95) translateY(-10px); }
    to { opacity: 1; transform: scale(1) translateY(0); }
}

.floating-panel:hover {
    box-shadow: 0 12px 32px rgba(0,0,0,0.15), 0 4px 12px rgba(0,0,0,0.1);
}

.floating-panel.dragging {
    opacity: 0.95;
    cursor: grabbing;
    box-shadow: 0 16px 48px rgba(0,0,0,0.2);
}

.floating-panel.collapsed {
    height: auto !important;
}

/* Panel Header - Gradient with Odoo Purple */
.floating-panel-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.875rem 1.25rem;
    background: linear-gradient(135deg, var(--pf-primary) 0%, var(--pf-primary-dark) 100%);
    color: white;
    cursor: grab;
    -webkit-user-select: none;
    user-select: none;
    gap: 0.5rem;
}

.floating-panel-header:active {
    cursor: grabbing;
}

.floating-panel-header i {
    font-size: 1rem;
    opacity: 0.9;
    margin-right: 0.5rem;
}

.panel-title {
    display: flex;
    align-items: center;
    font-weight: 600;
    font-size: 0.95rem;
    letter-spacing: -0.01em;
}

.panel-controls {
    display: flex;
    gap: 0.25rem;
}

.panel-btn {
    color: white;
    opacity: 0.7;
    padding: 0.25rem 0.5rem;
    border-radius: var(--pf-radius-sm);
    transition: all var(--pf-transition);
}

.panel-btn:hover {
    opacity: 1;
    color: white;
    background: rgba(255,255,255,0.15);
}

/* Panel Content */
.floating-panel-content {
    flex: 1;
    overflow-y: auto;
    padding: var(--pf-space-md);
}

.panel-section {
    margin-bottom: 1rem;
}

.panel-section:last-child {
    margin-bottom: 0;
}

.panel-section h6 {
    margin-bottom: 0.5rem;
    color: #2c3e50;
    font-weight: 600;
}

/* Resize Handle */
.panel-resize-handle {
    position: absolute;
    bottom: 0;
    right: 0;
    width: 20px;
    height: 20px;
    cursor: se-resize;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #adb5bd;
    font-size: 0.7rem;
}

.panel-resize-handle:hover {
    color: #6c757d;
}

/* ========================================
   RESOURCE LIST - Card-Style Items
   ======================================== */
.resource-list {
    flex: 1;
    overflow-y: auto;
    border-radius: var(--pf-radius-md);
    padding: 0.25rem;
    /* Ensure last items aren't obscured by sticky footer */
    padding-bottom: 1rem;
    /* Better scroll behavior */
    scroll-behavior: smooth;
    overscroll-behavior: contain;
}

/* Allow the jobs list to use available space */
.resource-list.jobs-list {
    min-height: 150px;
    max-height: calc(100vh - 400px);
}

.resource-list.inspectors-list {
    min-height: 100px;
    max-height: calc(100vh - 450px);
}

.resource-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 0.75rem;
    background: var(--pf-gray-100);
    border-radius: var(--pf-radius-md);
    border: 1px solid transparent;
    margin-bottom: 0.5rem;
    cursor: pointer;
    transition: all var(--pf-transition);
}

.resource-item:last-child {
    margin-bottom: 0;
}

.resource-item:hover {
    background: var(--pf-white);
    border-color: var(--pf-primary-light);
    box-shadow: 0 2px 8px rgba(113, 75, 103, 0.12);
    transform: translateX(4px);
}

.resource-item.selected {
    background: var(--pf-primary-bg);
    border-color: var(--pf-primary);
    box-shadow: 0 2px 8px rgba(113, 75, 103, 0.15);
}

.resource-item.unavailable {
    opacity: 0.5;
    background: #f5f5f5;
}

.resource-item input[type="checkbox"] {
    accent-color: var(--pf-primary);
    width: 16px;
    height: 16px;
}

.resource-name {
    flex: 1;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--pf-gray-700);
}

.resource-status {
    font-size: 0.7rem;
}

/* Job Item - Ultra-Compact High-Density Layout */
.job-item {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 0.3rem;
    padding: 0.25rem 0.4rem;
    margin-bottom: 1px;
    /* Status color strip on left border - thicker for visibility */
    border-left: 4px solid var(--pf-gray-300);
    transition: all 0.15s ease;
    background: white;
    min-height: 32px;
}

/* Status-based left border colors for rapid scanning - GEMINI UX FIX: Reduced alarm fatigue */
/* Blue for standard unassigned, Red ONLY for urgent (priority=2) */
.job-item[data-status="draft"] { border-left-color: #3B82F6; }      /* Blue - standard unassigned */
.job-item[data-status="pending"] { border-left-color: #F97316; }    /* Orange - pending */
.job-item[data-status="scheduled"] { border-left-color: #10B981; }  /* Green - scheduled/confirmed */
.job-item[data-status="assigned"] { border-left-color: #8B5CF6; }   /* Purple - assigned */
.job-item[data-status="in_progress"] { border-left-color: #0EA5E9; } /* Sky blue - active */
.job-item[data-status="completed"] { border-left-color: #22C55E; }  /* Green - done */
.job-item[data-status="cancelled"] { border-left-color: #6B7280; }  /* Grey - cancelled */

/* Urgent/high priority jobs override with RED */
.job-item[data-priority="2"],
.job-item[data-priority="urgent"],
.job-item.urgent {
    border-left-color: #EF4444 !important; /* Red - truly urgent */
}

/* Overdue jobs get red border */
.job-item[data-overdue="true"] { border-left-color: #dc3545; }

.job-item-checkbox {
    flex-shrink: 0;
    padding-top: 2px;
}

.job-item-checkbox input[type="checkbox"] {
    width: 16px;
    height: 16px;
    cursor: pointer;
}

.job-item-content {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    gap: 0;
}

/* ========================================
   JOB HOVER ACTIONS (Quick Assign)
   ======================================== */
.job-hover-actions {
    position: absolute;
    right: 0.5rem;
    top: 50%;
    transform: translateY(-50%);
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.15s ease, visibility 0.15s ease;
    z-index: 5;
}

.job-item:hover .job-hover-actions {
    opacity: 1;
    visibility: visible;
}

.quick-assign-single {
    width: 28px;
    height: 28px;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    background: var(--pf-primary);
    border: none;
    color: white;
    box-shadow: 0 2px 6px rgba(139, 92, 246, 0.4);
    transition: transform 0.15s ease, box-shadow 0.15s ease;
}

.quick-assign-single:hover {
    transform: scale(1.1);
    box-shadow: 0 4px 12px rgba(139, 92, 246, 0.5);
    background: var(--pf-primary-dark);
}

.quick-assign-single i {
    font-size: 0.7rem;
}

/* Make room for hover action button */
.job-item {
    position: relative;
}

/* Primary: Property name (compact) */
.job-property-name {
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--pf-text);
    line-height: 1.15;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Address line with icon (ultra-compact) */
.job-address {
    font-size: 0.6rem;
    color: var(--pf-gray-500);
    line-height: 1.1;
    display: flex;
    align-items: center;
    gap: 0.15rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.job-address::before {
    content: 'üìç';
    font-size: 0.5rem;
    flex-shrink: 0;
}

/* Meta row: show status pill + times inline for scannable info */
.job-item-meta {
    display: flex;
    align-items: center;
    gap: 0.35rem;
    margin-top: 0.15rem;
    flex-wrap: nowrap;
}

/* Status badge pill - small but visible with color coding */
.job-item-meta .job-status-pill {
    display: inline-flex;
    align-items: center;
    padding: 0.1rem 0.4rem;
    border-radius: 10px;
    font-size: 0.55rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.02em;
    white-space: nowrap;
    line-height: 1.2;
}

/* Status pill colors */
.job-status-pill.status-draft {
    background: #FEE2E2;
    color: #DC2626;
}
.job-status-pill.status-pending {
    background: #FFEDD5;
    color: #EA580C;
}
.job-status-pill.status-scheduled {
    background: #DBEAFE;
    color: #2563EB;
}
.job-status-pill.status-assigned {
    background: #EDE9FE;
    color: #7C3AED;
}
.job-status-pill.status-in_progress {
    background: #E0F2FE;
    color: #0284C7;
}
.job-status-pill.status-completed {
    background: #DCFCE7;
    color: #16A34A;
}
.job-status-pill.status-cancelled {
    background: #F3F4F6;
    color: #6B7280;
}

/* Urgent indicator - pulsing dot */
.job-urgent-indicator {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: #EF4444;
    animation: pulse-urgent 1.5s infinite;
    flex-shrink: 0;
}

@keyframes pulse-urgent {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.5; transform: scale(1.3); }
}

/* Overdue label */
.job-overdue-label {
    font-size: 0.5rem;
    font-weight: 700;
    color: #DC2626;
    text-transform: uppercase;
    padding: 0 0.2rem;
}

.job-item-times {
    display: flex;
    gap: 0.25rem;
    font-size: 0.55rem;
    flex-shrink: 0;
    color: var(--pf-gray-500);
}

.job-deadline {
    color: var(--pf-warning);
    font-weight: 500;
    font-size: 0.55rem;
}

.job-scheduled {
    color: var(--pf-success);
    font-weight: 600;
    font-size: 0.55rem;
}

/* ========================================
   COMPACT VIEW MODE (Issue 3) - Ultra Dense
   ======================================== */
/* When compact mode is enabled, show even denser list */
.jobs-list.compact-mode .job-item {
    min-height: 22px;
    max-height: 26px;
    padding: 0.1rem 0.35rem;
    border-left-width: 3px;
    gap: 0.25rem;
}

.jobs-list.compact-mode .job-item-checkbox {
    display: flex;
    align-items: center;
}

.jobs-list.compact-mode .job-item-checkbox input[type="checkbox"] {
    width: 12px;
    height: 12px;
}

.jobs-list.compact-mode .job-property-name {
    font-size: 0.65rem;
    font-weight: 500;
    line-height: 1.1;
}

.jobs-list.compact-mode .job-address {
    display: none;
}

.jobs-list.compact-mode .job-item-meta {
    margin-top: 0;
    gap: 0.15rem;
}

.jobs-list.compact-mode .job-status-pill {
    padding: 0.02rem 0.25rem;
    font-size: 0.45rem;
    line-height: 1.1;
}

.jobs-list.compact-mode .job-urgent-indicator {
    width: 5px;
    height: 5px;
}

.jobs-list.compact-mode .job-overdue-label {
    font-size: 0.45rem;
    padding: 0 0.15rem;
}

.jobs-list.compact-mode .job-deadline,
.jobs-list.compact-mode .job-scheduled {
    display: none;
}

/* In compact mode, property name and status are on same line */
.jobs-list.compact-mode .job-item-content {
    flex-direction: row;
    align-items: center;
    gap: 0.35rem;
}

.jobs-list.compact-mode .job-property-name {
    flex: 1;
}

/* Hide hover actions in compact mode (too small) */
.jobs-list.compact-mode .job-hover-actions {
    display: none;
}

/* ========================================
   ROUTE LIST - Card Style
   ======================================== */
.route-list {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.route-item {
    padding: 0.875rem;
    background: var(--pf-gray-100);
    border-radius: var(--pf-radius-md);
    cursor: pointer;
    transition: all var(--pf-transition);
    border: 2px solid transparent;
}

.route-item:hover {
    background: var(--pf-white);
    border-color: var(--pf-gray-300);
    box-shadow: var(--pf-shadow-sm);
    transform: translateX(4px);
}

.route-item.selected {
    background: var(--pf-primary-bg);
    border-color: var(--pf-primary);
    box-shadow: 0 2px 8px rgba(113, 75, 103, 0.15);
}

.route-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.35rem;
}

.route-name {
    font-weight: 600;
    color: var(--pf-gray-700);
}

.route-meta {
    display: flex;
    gap: 1rem;
    font-size: 0.8rem;
    color: var(--pf-gray-500);
}

.route-meta i {
    margin-right: 0.25rem;
    color: var(--pf-primary-light);
}

/* ========================================
   RESULT STATS - Dashboard Cards
   ======================================== */
.result-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
}

.stat-item {
    text-align: center;
    padding: 0.75rem 0.5rem;
    background: var(--pf-gray-100);
    border-radius: var(--pf-radius-md);
    border: 1px solid var(--pf-gray-300);
    transition: all var(--pf-transition);
}

.stat-item:hover {
    background: var(--pf-white);
    border-color: var(--pf-primary-light);
    box-shadow: var(--pf-shadow-sm);
}

.stat-label {
    display: block;
    font-size: 0.65rem;
    color: var(--pf-gray-500);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 0.25rem;
}

.stat-value {
    display: block;
    font-size: 1.35rem;
    font-weight: 700;
    color: var(--pf-primary);
    letter-spacing: -0.02em;
}

/* Timeline Container (Grid row 2, spans map area) */
.dispatch-timeline-container {
    grid-column: 2;
    grid-row: 2;
    height: 200px;
    background: var(--pf-white);
    border-top: 1px solid var(--pf-gray-300);
    z-index: 100;
    overflow: hidden;
}

/* ========================================
   EMPTY STATE - Friendly CTA
   ======================================== */
.dispatch-empty-state {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    z-index: 200;
    background: var(--pf-white);
    padding: 2.5rem 3.5rem;
    border-radius: var(--pf-radius-lg);
    box-shadow: var(--pf-shadow-lg);
    animation: scaleIn 0.3s ease-out;
    border: 1px solid rgba(0,0,0,0.06);
}

.empty-state-content h4 {
    margin-bottom: 0.5rem;
    color: var(--pf-gray-700);
    font-weight: 600;
}

.empty-state-content p {
    color: var(--pf-gray-500);
    margin-bottom: 1.5rem;
}

.empty-state-content .fa-4x {
    color: var(--pf-primary-light);
    opacity: 0.6;
}

.empty-state-content .btn-primary {
    background: var(--pf-primary);
    border-color: var(--pf-primary);
    padding: 0.75rem 1.5rem;
    font-weight: 500;
    transition: all var(--pf-transition);
}

.empty-state-content .btn-primary:hover {
    background: var(--pf-primary-dark);
    border-color: var(--pf-primary-dark);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(113, 75, 103, 0.3);
}

/* Button Sizes */
.btn-xs {
    padding: 0.35rem 0.75rem;
    font-size: 0.75rem;
}

/* Button group spacing in panels */
.panel-section .d-flex.gap-1 {
    gap: 0.5rem !important;
    margin-bottom: 0.75rem;
}

/* ========================================
   STATUS BADGES - Pill Style, Soft Colors
   ======================================== */
.badge {
    font-size: 0.7rem;
    font-weight: 500;
    padding: 0.35em 0.75em;
    border-radius: var(--pf-radius-pill);
    display: inline-flex;
    align-items: center;
    gap: 4px;
    text-transform: capitalize;
    letter-spacing: 0.01em;
}

/* Soft color variants (better readability) */
.badge-draft {
    background: #e9ecef;
    color: #495057;
}
.badge-pending {
    background: #fff3cd;
    color: #856404;
    border: 1px solid #ffeaa7;
}
.badge-assigned {
    background: #cce5ff;
    color: #004085;
}
.badge-in_progress {
    background: #f3e8f1;
    color: var(--pf-primary);
}
.badge-completed {
    background: #d4edda;
    color: #155724;
}
.badge-cancelled {
    background: #f8d7da;
    color: #721c24;
}

/* ========================================
   MAP PIN MARKERS - Simple circular pins

   Using Mapbox default marker behavior.
   The element center is placed at the geo-coordinate.
   ======================================== */

.job-pin-marker {
    /* Larger circle marker for better visibility */
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
}

.job-pin {
    --pin-color: var(--pf-primary);
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--pin-color);
    border-radius: 50%;
    box-shadow: 0 2px 8px rgba(0,0,0,0.4);
    border: 3px solid white;
    transition: transform 0.15s ease;
}

.job-pin-marker:hover .job-pin {
    transform: scale(1.15);
}

.job-pin-number {
    color: white;
    font-size: 14px;
    font-weight: 700;
    text-shadow: 0 1px 2px rgba(0,0,0,0.5);
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    line-height: 1;
}

/* Icon for unrouted pins (dot instead of number) */
.job-pin-icon {
    color: white;
    font-size: 12px;
    line-height: 1;
}

/* Hide the tail - using center-anchored circle instead */
.job-pin-tail {
    display: none;
}

/* === PIN SELECTION STATES === */

/* Unselected pins: Muted grey, smaller */
.job-pin-marker:not(.selected):not(.routed) .job-pin {
    opacity: 0.7;
    transform: scale(0.85);
}

/* === UNASSIGNED PIN PULSING (Issue 7) === */
/* Draft/unassigned pins pulse to attract attention */
.job-pin-marker .job-pin[data-status="draft"] {
    animation: pulse-unassigned 2s ease-in-out infinite;
}

@keyframes pulse-unassigned {
    0%, 100% {
        box-shadow: 0 2px 8px rgba(0,0,0,0.4),
                    0 0 0 0 rgba(239, 68, 68, 0.6);
    }
    50% {
        box-shadow: 0 2px 8px rgba(0,0,0,0.4),
                    0 0 0 8px rgba(239, 68, 68, 0);
    }
}

/* Stop pulsing when selected */
.job-pin-marker.selected .job-pin[data-status="draft"] {
    animation: none;
}

/* Selected pins: Bright purple with glow */
.job-pin-marker.selected:not(.routed) .job-pin {
    box-shadow: 0 2px 8px rgba(0,0,0,0.4),
                0 0 0 3px rgba(139, 92, 246, 0.4);
}

/* Routed pins: Full color based on status */
.job-pin-marker.routed .job-pin {
    transform: scale(1);
    opacity: 1;
}

/* Pin Status Colors - only apply to routed pins */
.job-pin-marker.routed .job-pin[data-status="draft"] { --pin-color: #8B5CF6; }
.job-pin-marker.routed .job-pin[data-status="pending"] { --pin-color: #F39C12; }
.job-pin-marker.routed .job-pin[data-status="scheduled"] { --pin-color: #17a2b8; }
.job-pin-marker.routed .job-pin[data-status="assigned"] { --pin-color: #ffc107; }
.job-pin-marker.routed .job-pin[data-status="in_progress"] { --pin-color: #007bff; }
.job-pin-marker.routed .job-pin[data-status="completed"] { --pin-color: #28a745; }
.job-pin-marker.routed .job-pin[data-status="cancelled"] { --pin-color: #dc3545; }

/* Highlighted job marker (on hover from list) */
.job-pin-marker.highlighted .job-pin {
    transform: scale(1.4);
    box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.9),
                0 0 0 8px var(--pin-color, #8B5CF6),
                0 8px 20px rgba(0, 0, 0, 0.3);
    animation: pulse-highlight 0.8s ease-in-out infinite;
}

@keyframes pulse-highlight {
    0%, 100% { box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.9), 0 0 0 8px var(--pin-color, #8B5CF6), 0 8px 20px rgba(0, 0, 0, 0.3); }
    50% { box-shadow: 0 0 0 6px rgba(255, 255, 255, 1), 0 0 0 12px var(--pin-color, #8B5CF6), 0 12px 30px rgba(0, 0, 0, 0.4); }
}

/* Hovered job item in list (from list hover) */
.job-item.hovered {
    background: linear-gradient(135deg, var(--pf-primary-bg), rgba(139, 92, 246, 0.15)) !important;
    border-color: var(--pf-primary) !important;
    box-shadow: 0 0 0 2px var(--pf-primary-light), 0 4px 12px rgba(113, 75, 103, 0.2);
}

/* Hovered job item in list (from map pin hover - bidirectional) */
.job-item.map-hovered {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(59, 130, 246, 0.2)) !important;
    border-color: #3B82F6 !important;
    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3), 0 4px 12px rgba(59, 130, 246, 0.2);
    animation: mapHoverPulse 0.8s ease-in-out infinite;
}

@keyframes mapHoverPulse {
    0%, 100% { box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3), 0 4px 12px rgba(59, 130, 246, 0.2); }
    50% { box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.4), 0 6px 16px rgba(59, 130, 246, 0.3); }
}

/* Cluster styling override for better visibility */
.mapboxgl-popup-content {
    padding: 12px 16px;
    border-radius: 8px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.15);
}

.mapboxgl-popup-close-button {
    font-size: 16px;
    padding: 2px 6px;
    color: var(--pf-gray-500);
    opacity: 1;
    font-weight: bold;
    background: none;
    border: none;
    transition: color 0.15s ease;
}

.mapboxgl-popup-close-button:hover {
    color: var(--pf-danger);
}

/* Compact Job Popup Styling */
.job-popup-content {
    min-width: 200px;
    max-width: 260px;
}

.job-popup-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.5rem;
    margin-bottom: 0.5rem;
    padding-bottom: 0.4rem;
    border-bottom: 1px solid var(--pf-gray-200);
}

.job-popup-header h6 {
    margin: 0;
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--pf-primary);
    flex: 1;
    line-height: 1.3;
}

.job-popup-status {
    font-size: 0.6rem;
    padding: 0.15rem 0.4rem;
    border-radius: 10px;
    color: white;
    font-weight: 500;
    text-transform: capitalize;
    flex-shrink: 0;
}

.job-popup-body {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.job-popup-row {
    font-size: 0.75rem;
    color: var(--pf-text);
    display: flex;
    align-items: flex-start;
    gap: 0.4rem;
    line-height: 1.3;
}

.job-popup-row i {
    color: var(--pf-gray-400);
    width: 12px;
    text-align: center;
    flex-shrink: 0;
    margin-top: 1px;
}

.job-popup-row.job-popup-scheduled {
    color: #2ecc71;
    font-weight: 500;
}

.job-popup-row.job-popup-scheduled i {
    color: #2ecc71;
}

/* Popup Action Button */
.job-popup-select-btn {
    font-size: 0.75rem !important;
    padding: 0.4rem 0.6rem !important;
    font-weight: 600;
    border-radius: 4px;
    transition: all 0.15s ease;
}

.job-popup-select-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);
}

.job-popup-select-btn.btn-primary {
    background: var(--pf-primary);
    border-color: var(--pf-primary);
}

.job-popup-select-btn.btn-outline-danger {
    color: #dc3545;
    border-color: #dc3545;
}

.job-popup-select-btn.btn-outline-danger:hover {
    background: #dc3545;
    color: white;
}

/* ========================================
   MAP LEGEND (Compact Icon with Hover Expand)
   ======================================== */

/* === Map Filter Toggle (GEMINI UX: Show All vs Show Listed) === */
.map-filter-toggle {
    position: absolute;
    top: 12px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 500;
    display: flex;
    gap: 0;
    background: var(--pf-white);
    border-radius: 20px;
    padding: 3px;
    box-shadow: var(--pf-shadow-md);
    border: 1px solid var(--pf-gray-300);
}

.map-filter-btn {
    display: flex;
    align-items: center;
    gap: 0.35rem;
    padding: 0.35rem 0.75rem;
    border: none;
    background: transparent;
    color: var(--pf-gray-600);
    font-size: 0.75rem;
    font-weight: 500;
    border-radius: 16px;
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
}

.map-filter-btn:hover {
    background: var(--pf-gray-100);
    color: var(--pf-gray-700);
}

.map-filter-btn.active {
    background: var(--pf-primary);
    color: white;
    box-shadow: 0 2px 4px rgba(113, 75, 103, 0.3);
}

.map-filter-btn i {
    font-size: 0.7rem;
}

.map-legend-compact {
    position: absolute;
    bottom: 100px;
    right: 20px;
    z-index: 500;
}

.legend-icon-btn {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: var(--pf-white);
    border: 1px solid var(--pf-gray-300);
    box-shadow: var(--pf-shadow-md);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--pf-gray-600);
    font-size: 1rem;
    transition: all 0.2s ease;
}

.legend-icon-btn:hover {
    background: var(--pf-primary);
    color: white;
    border-color: var(--pf-primary);
    transform: scale(1.1);
}

.legend-popup {
    position: absolute;
    bottom: 100%;
    right: 0;
    margin-bottom: 8px;
    background: var(--pf-white);
    border-radius: var(--pf-radius-md);
    box-shadow: var(--pf-shadow-lg);
    border: 1px solid var(--pf-gray-300);
    padding: 0.75rem;
    min-width: 160px;
    font-size: 0.75rem;
    opacity: 0;
    visibility: hidden;
    transform: translateY(10px);
    transition: all 0.2s ease;
    pointer-events: none;
}

.map-legend-compact:hover .legend-popup {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
    pointer-events: auto;
}

.legend-section-title {
    font-size: 0.65rem;
    font-weight: 600;
    color: var(--pf-gray-500);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-top: 0.25rem;
    margin-bottom: 0.35rem;
}

.legend-divider {
    height: 1px;
    background: var(--pf-gray-200);
    margin: 0.5rem 0;
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.2rem 0;
    color: var(--pf-gray-700);
    font-size: 0.7rem;
}

.legend-marker {
    width: 14px;
    height: 14px;
    border-radius: 50%;
    flex-shrink: 0;
    border: 2px solid white;
    box-shadow: 0 1px 3px rgba(0,0,0,0.2);
}

/* Pulsing legend marker for unassigned */
.legend-marker.pulsing {
    animation: legend-pulse 2s ease-in-out infinite;
}

@keyframes legend-pulse {
    0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4), 0 1px 3px rgba(0,0,0,0.2); }
    50% { box-shadow: 0 0 0 4px rgba(239, 68, 68, 0), 0 1px 3px rgba(0,0,0,0.2); }
}

/* Selected ring effect */
.legend-marker.selected-ring {
    box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.4), 0 1px 3px rgba(0,0,0,0.2);
}

.legend-item small {
    color: var(--pf-gray-400);
    font-size: 0.6rem;
}

.legend-cluster {
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: linear-gradient(135deg, #FF9500, #FF6B00);
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.6rem;
    color: white;
    font-weight: 700;
    box-shadow: 0 1px 3px rgba(0,0,0,0.15);
    border: 2px solid white;
}

.legend-cluster::after {
    content: '#';
}

/* ========================================
   NOTIFICATION POSITIONING
   Move to bottom-right for less intrusion
   ======================================== */

.o_enhanced_dispatch_view .o_notification_manager {
    position: fixed;
    bottom: 20px;
    right: 20px;
    left: auto !important;
    top: auto !important;
    transform: none;
    max-width: 360px;
    z-index: 2000;
}

.o_enhanced_dispatch_view .o_notification {
    animation: slideUpFade 0.3s ease;
    border-radius: var(--pf-radius-md);
    box-shadow: var(--pf-shadow-lg);
}

.o_enhanced_dispatch_view .o_notification_content {
    font-size: 0.875rem;
}

@keyframes slideUpFade {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ========================================
   SKELETON LOADING STATES
   ======================================== */
@keyframes shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

.skeleton {
    background: linear-gradient(90deg, #f0f0f0 25%, #e8e8e8 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s ease-in-out infinite;
    border-radius: var(--pf-radius-sm);
}

.skeleton-text {
    height: 1rem;
    margin-bottom: 0.5rem;
    border-radius: var(--pf-radius-sm);
}

.skeleton-title {
    height: 1.5rem;
    width: 60%;
    border-radius: var(--pf-radius-sm);
}

.skeleton-card {
    height: 60px;
    margin-bottom: 0.5rem;
    border-radius: var(--pf-radius-md);
}

/* ========================================
   TODAY BUTTON HIGHLIGHT
   ======================================== */
.btn-today.not-today {
    background: rgba(113, 75, 103, 0.15);
    color: rgba(255,255,255,0.95);
    border-color: var(--pf-primary-light);
}

/* ========================================
   FOCUS STATES (Accessibility)
   ======================================== */
.dispatch-tab:focus-visible,
.btn-date-nav:focus-visible,
.btn-today:focus-visible,
.resource-item:focus-visible {
    outline: 2px solid var(--pf-primary-light);
    outline-offset: 2px;
}

/* ========================================
   RESPONSIVE ADJUSTMENTS
   ======================================== */
@media (max-width: 768px) {
    .dispatch-navbar {
        flex-wrap: wrap;
        gap: 0.5rem;
        padding: 0.5rem;
    }

    .dispatch-stepper {
        order: 3;
        width: 100%;
        justify-content: center;
    }

    .stepper-label {
        display: none !important;
    }

    .stepper-connector {
        width: 16px;
    }

    .floating-panel {
        left: 10px !important;
        right: 10px !important;
        width: auto !important;
    }
}

/* ========================================
   INSPECTOR HOME MARKERS
   ======================================== */
.inspector-home-marker {
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: pointer;
    animation: markerPulse 2s ease-in-out infinite;
    /* Ensure markers don't overlap map controls */
    z-index: 1 !important;
    pointer-events: auto;
}

@keyframes markerPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

/* Legacy icon style (kept for backwards compatibility) */
.inspector-marker-icon {
    width: 36px;
    height: 36px;
    background: linear-gradient(135deg, var(--pf-primary) 0%, var(--pf-primary-dark) 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 16px;
    box-shadow: 0 4px 12px rgba(113, 75, 103, 0.4);
    border: 3px solid white;
}

.inspector-marker-icon:hover {
    transform: scale(1.15);
    box-shadow: 0 6px 16px rgba(113, 75, 103, 0.5);
}

/* New avatar style with initials */
.inspector-avatar {
    width: 42px;
    height: 42px;
    background: linear-gradient(135deg, #3B82F6 0%, #1D4ED8 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 14px;
    font-weight: 700;
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
    border: 3px solid white;
    transition: all 0.2s ease;
}

.inspector-avatar:hover {
    transform: scale(1.15);
    box-shadow: 0 6px 16px rgba(59, 130, 246, 0.5);
}

.inspector-initials {
    letter-spacing: 1px;
}

.inspector-marker-label {
    margin-top: 4px;
    background: rgba(26, 37, 47, 0.9);
    color: white;
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 11px;
    font-weight: 600;
    white-space: nowrap;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
}

/* ========================================
   GEMINI UX IMPROVEMENTS
   Based on AI analysis recommendations
   ======================================== */

/* === A. ENHANCED DATA DENSITY IN JOB LIST === */
/* Compressed padding for more visible jobs */
.job-item {
    padding: 0.35rem 0.5rem !important;
    margin-bottom: 2px;
    min-height: 38px;
    border-radius: var(--pf-radius-sm);
    border: 1px solid transparent;
}

.job-item:hover {
    background: var(--pf-gray-100);
    border-color: var(--pf-gray-200);
}

.job-item.selected {
    background: var(--pf-primary-bg);
    border-color: var(--pf-primary-light);
}

/* Enhanced property name visibility */
.job-property-name {
    font-size: 0.8rem !important;
    font-weight: 600;
    color: #212529 !important;
    margin-bottom: 1px;
}

/* Improved address readability (Gemini UX: increase font, darken color, heavier weight) */
.job-address {
    font-size: 0.75rem !important;      /* Larger for better readability */
    color: #333333 !important;          /* Dark grey, high contrast */
    font-weight: 500 !important;        /* Medium weight for legibility */
    line-height: 1.3;
    letter-spacing: -0.01em;            /* Tighter for compact look */
}

/* === B. SETTINGS AREA - COMPACT BY DEFAULT === */
/* Minimize settings section to reclaim space */
.sidebar-section.settings-section {
    max-height: 48px;
    overflow: hidden;
    transition: max-height 0.3s ease;
    background: var(--pf-gray-50);
    border: 1px dashed var(--pf-gray-200);
}

.sidebar-section.settings-section:hover,
.sidebar-section.settings-section.expanded {
    max-height: 400px;
}

.sidebar-section.settings-section .section-header {
    margin-bottom: 0;
    cursor: pointer;
}

.sidebar-section.settings-section .section-body {
    margin-top: 0.5rem;
    padding-top: 0.5rem;
    border-top: 1px solid var(--pf-gray-200);
}

/* Settings collapse indicator */
.settings-section .collapse-indicator {
    font-size: 0.65rem;
    color: var(--pf-gray-400);
    margin-left: auto;
    transition: transform 0.2s ease;
}

.settings-section.expanded .collapse-indicator {
    transform: rotate(180deg);
}

/* === C. MAXIMIZE SIDEBAR LIST HEIGHT === */
/* Force the job list to fill available space */
.sidebar-content {
    display: flex;
    flex-direction: column;
    flex: 1 1 auto;
    min-height: 0;
    overflow: hidden;
}

.sidebar-tab-content {
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    min-height: 0;
    overflow: hidden;
}

/* Scrollable job list area */
.job-list-container,
.resource-list-scrollable {
    flex: 1 1 auto;
    overflow-y: auto;
    min-height: 0;
    padding-bottom: 0.5rem;
}

/* Sticky action button footer - GEMINI UX: Truly sticky at viewport bottom */
.sidebar-footer {
    flex: 0 0 auto;
    position: sticky !important;
    bottom: 0 !important;
    left: 0;
    right: 0;
    padding: 0.75rem 1rem;
    background: rgba(255, 255, 255, 0.98);
    -webkit-backdrop-filter: blur(12px);
    backdrop-filter: blur(12px);
    border-top: 1px solid var(--pf-gray-200);
    box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.12);
    z-index: 200;
    margin-top: auto;
}

/* === D. SMART ADDRESS TRUNCATION === */
/* Single-line addresses with ellipsis */
.job-address-truncated {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
}

.job-address-truncated .street {
    flex: 0 1 auto;
    overflow: hidden;
    text-overflow: ellipsis;
}

.job-address-truncated .postcode {
    flex: 0 0 auto;
    font-weight: 500;
    color: var(--pf-gray-600);
}

/* === E. CONDENSE SIDEBAR HEADER === */
/* Inline tabs and search for space efficiency */
.sidebar-header-compact {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 0.75rem;
    background: linear-gradient(135deg, var(--pf-primary) 0%, var(--pf-primary-dark) 100%);
}

.sidebar-tabs-inline {
    display: flex;
    background: rgba(255,255,255,0.15);
    border-radius: 4px;
    padding: 2px;
}

.sidebar-tabs-inline .sidebar-tab {
    padding: 0.3rem 0.6rem;
    font-size: 0.7rem;
    border-radius: 3px;
    color: rgba(255,255,255,0.7);
    background: transparent;
    border: none;
    cursor: pointer;
    transition: all 0.15s ease;
}

.sidebar-tabs-inline .sidebar-tab:hover {
    color: white;
    background: rgba(255,255,255,0.1);
}

.sidebar-tabs-inline .sidebar-tab.active {
    color: var(--pf-primary);
    background: white;
    font-weight: 600;
}

/* === F. STATUS COLOR CODING ENHANCEMENT === */
/* More visible status indicators */
.job-item {
    position: relative;
}

/* Add status dot indicator */
.job-status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    flex-shrink: 0;
    box-shadow: 0 1px 2px rgba(0,0,0,0.2);
}

.job-status-dot.status-draft { background: #EF4444; }
.job-status-dot.status-pending { background: #F97316; }
.job-status-dot.status-scheduled { background: #3B82F6; }
.job-status-dot.status-assigned { background: #8B5CF6; }
.job-status-dot.status-in_progress { background: #0EA5E9; }
.job-status-dot.status-completed { background: #22C55E; }
.job-status-dot.status-cancelled { background: #6B7280; }

/* === G. STICKY FOOTER WITH SCROLL BEHIND === */
/* Semi-transparent background for scroll-behind effect */
.sidebar-footer-floating {
    position: sticky;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 0.75rem;
    background: rgba(255, 255, 255, 0.95);
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
    border-top: 1px solid var(--pf-gray-200);
    box-shadow: 0 -4px 16px rgba(0, 0, 0, 0.08);
    z-index: 50;
}

/* === H. TIME/SCHEDULE VISIBILITY === */
/* Make scheduled time more prominent */
.job-scheduled-time {
    display: inline-flex;
    align-items: center;
    gap: 0.2rem;
    font-size: 0.7rem;
    font-weight: 600;
    color: var(--pf-success);
    background: rgba(34, 197, 94, 0.1);
    padding: 0.15rem 0.4rem;
    border-radius: 3px;
}

.job-scheduled-time i {
    font-size: 0.6rem;
}

/* Overdue time styling */
.job-overdue-time {
    color: var(--pf-danger);
    background: rgba(239, 68, 68, 0.1);
}

/* === I. ENHANCED SELECTION FEEDBACK === */
/* Clear visual feedback when items are selected */
.job-item.selected {
    background: linear-gradient(135deg, rgba(113, 75, 103, 0.08), rgba(113, 75, 103, 0.12));
    border-color: var(--pf-primary);
    box-shadow: inset 0 0 0 1px var(--pf-primary-light);
}

.job-item.selected .job-property-name {
    color: var(--pf-primary-dark);
}

/* Selected count badge animation */
.selection-count-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 20px;
    height: 20px;
    background: var(--pf-primary);
    color: white;
    font-size: 0.7rem;
    font-weight: 700;
    border-radius: 10px;
    padding: 0 0.4rem;
    animation: countPulse 0.3s ease;
}

@keyframes countPulse {
    0% { transform: scale(0.8); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

/* === J. ACCESSIBILITY IMPROVEMENTS === */
/* Better focus indicators */
.job-item:focus-visible,
.resource-item:focus-visible,
.sidebar-tab:focus-visible {
    outline: 2px solid var(--pf-primary);
    outline-offset: 2px;
}

/* Ensure minimum touch target size (44x44) */
@media (pointer: coarse) {
    .job-item {
        min-height: 44px;
    }

    .sidebar-tab {
        min-height: 44px;
        min-width: 44px;
    }

    .job-item-checkbox input[type="checkbox"] {
        width: 20px;
        height: 20px;
    }
}

/* ========================================
   GEMINI UX IMPROVEMENTS - ROUND 2
   Icon-based badges, ultra-compact mode
   ======================================== */

/* === ICON-BASED STATUS INDICATORS (replaces text badges) === */
.job-status-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    font-size: 0.6rem;
    flex-shrink: 0;
    transition: all 0.15s ease;
}

/* Status icon colors - matches original pill colors */
.job-status-icon.status-draft {
    background: #FEE2E2;
    color: #DC2626;
}
.job-status-icon.status-pending {
    background: #FFEDD5;
    color: #EA580C;
}
.job-status-icon.status-scheduled {
    background: #DBEAFE;
    color: #2563EB;
}
.job-status-icon.status-assigned {
    background: #EDE9FE;
    color: #7C3AED;
}
.job-status-icon.status-in_progress {
    background: #E0F2FE;
    color: #0284C7;
}
.job-status-icon.status-in_progress i {
    animation: spin 1.5s linear infinite;
}
.job-status-icon.status-completed {
    background: #DCFCE7;
    color: #16A34A;
}
.job-status-icon.status-cancelled {
    background: #F3F4F6;
    color: #6B7280;
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* Status text (shown in non-compact mode) */
.job-status-text {
    font-size: 0.6rem;
    font-weight: 500;
    color: var(--pf-gray-600);
    text-transform: uppercase;
    letter-spacing: 0.02em;
}

/* Overdue icon (replaces "LATE" text badge) */
.job-overdue-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 16px;
    height: 16px;
    color: #EF4444;
    font-size: 0.65rem;
    animation: pulse-overdue 1.5s ease-in-out infinite;
    flex-shrink: 0;
}

@keyframes pulse-overdue {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.7; transform: scale(1.1); }
}

/* Time info styling with clock icon (GEMINI UX: Add icon for clarity) */
.job-time-info {
    display: inline-flex;
    align-items: center;
    gap: 0.2rem;
    font-size: 0.65rem;
    color: var(--pf-gray-600);
    font-weight: 500;
    white-space: nowrap;
    margin-left: auto;
    padding: 0.1rem 0.3rem;
    background: var(--pf-gray-100);
    border-radius: 4px;
}

.job-time-info i.fa-clock-o {
    font-size: 0.55rem;
    color: var(--pf-gray-500);
}

/* === ULTRA-COMPACT MODE ENHANCEMENTS === */
/* Gemini UX: Reduce card height by 40% more */
.jobs-list.compact-mode .job-item {
    min-height: 20px;
    max-height: 22px;
    padding: 0.05rem 0.3rem;
    border-left-width: 2px;
    gap: 0.2rem;
    margin-bottom: 1px;
}

.jobs-list.compact-mode .job-item-checkbox {
    padding: 0;
}

.jobs-list.compact-mode .job-item-checkbox input[type="checkbox"] {
    width: 10px;
    height: 10px;
}

.jobs-list.compact-mode .job-property-name {
    font-size: 0.6rem;
    font-weight: 500;
    line-height: 1;
    max-width: 120px;
}

/* Ultra-compact: single line layout */
.jobs-list.compact-mode .job-item-content {
    flex-direction: row;
    align-items: center;
    gap: 0.25rem;
    flex: 1;
    min-width: 0;
}

/* Compact mode: smaller icons */
.jobs-list.compact-mode .job-status-icon {
    width: 14px;
    height: 14px;
    font-size: 0.5rem;
}

.jobs-list.compact-mode .job-overdue-icon {
    width: 12px;
    height: 12px;
    font-size: 0.5rem;
}

.jobs-list.compact-mode .job-time-info {
    font-size: 0.5rem;
}

.jobs-list.compact-mode .job-status-text {
    display: none;
}

.jobs-list.compact-mode .job-item-meta {
    margin-top: 0;
    gap: 0.15rem;
    flex-shrink: 0;
}

/* Abbreviated property names styling */
.job-property-name {
    /* Support for abbreviated names like "ST-20" */
    font-variant-numeric: tabular-nums;
}

/* === CLUSTER SPIDERFY STYLES === */
/* Spider lines connecting cluster center to spread pins */
.spider-line {
    stroke: var(--pf-primary);
    stroke-width: 1.5;
    stroke-dasharray: 4, 2;
    fill: none;
    opacity: 0.7;
    transition: opacity 0.3s ease;
}

.spider-line:hover {
    opacity: 1;
    stroke-width: 2;
}

/* Spider leg pins (smaller than regular pins) */
.spider-pin {
    width: 24px;
    height: 24px;
    font-size: 0.65rem;
    box-shadow: 0 2px 6px rgba(0,0,0,0.25);
    animation: spider-appear 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

@keyframes spider-appear {
    from {
        opacity: 0;
        transform: scale(0.5);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

/* Spider center marker (shown when expanded) */
.spider-center {
    background: var(--pf-gray-800);
    color: white;
    border: 2px solid white;
    cursor: pointer;
}

.spider-center:hover {
    background: var(--pf-gray-900);
    transform: scale(1.1);
}


/* ========================================
   PHASE 10: UX POLISH (Production Analysis)
   ======================================== */

/* 10.4: Increase Search Bar Width (NFR-UX-QW4) */
.search-view-row .search-filter {
    min-width: 300px;
    flex: 1 1 300px;
}

.search-filter .form-control {
    min-width: 200px;
}

/* 10.3: Tooltips for Filter Pills - Visual indicator that tooltip exists */
.filter-pill[title] {
    position: relative;
}

.filter-pill[title]:hover::after {
    content: '';
    position: absolute;
    bottom: -4px;
    left: 50%;
    transform: translateX(-50%);
    width: 4px;
    height: 4px;
    background: var(--pf-primary);
    border-radius: 50%;
    opacity: 0.5;
}

/* 10.5 & 10.8: Certification Type Icons & Inspector Name Display */
.job-cert-type {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-size: 0.65rem;
    color: var(--pf-gray-600);
    margin-left: 4px;
}

.job-cert-type .cert-icon {
    width: 14px;
    height: 14px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 3px;
    font-size: 8px;
    font-weight: 700;
}

/* Certification Type Icons - FLAGE+ color coding */
.cert-icon.fire { background: #FEE2E2; color: #DC2626; }
.cert-icon.legionella { background: #DBEAFE; color: #2563EB; }
.cert-icon.asbestos { background: #FEF3C7; color: #D97706; }
.cert-icon.gas { background: #E0E7FF; color: #4338CA; }
.cert-icon.electrical { background: #FCE7F3; color: #BE185D; }
.cert-icon.epc { background: #D1FAE5; color: #059669; }
.cert-icon.pat { background: #F3E8FF; color: #7C3AED; }
.cert-icon.other { background: #F3F4F6; color: #6B7280; }

/* Inspector name display on job card */
.job-inspector {
    display: inline-flex;
    align-items: center;
    gap: 3px;
    font-size: 0.6rem;
    color: var(--pf-primary);
    background: var(--pf-primary-bg);
    padding: 1px 6px;
    border-radius: 10px;
    margin-left: 4px;
}

.job-inspector i {
    font-size: 0.55rem;
}

/* 10.9: General Tooltips - Better visibility */
[title] {
    cursor: help;
}

/* Tooltip styling via native browser - ensure good contrast */
.filter-pill[title],
.job-status-icon[title],
.job-cert-type[title],
.cert-icon[title] {
    cursor: pointer;
}
